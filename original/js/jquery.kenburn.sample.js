/**************************************************************************
 * jquery.themepunch.kenburn.js - jQuery Plugin for kenburn Slider
 * @version: 1.5 (14.02.2013)
 * @requires jQuery v1.4 or later
 * @author THEMEPUNCH
**************************************************************************/


(function(e,t){function n(t,n){t.find("iframe").attr("frameborder",0);t.find("ul").wrap('<div class="slide_mainmask" style="z-index:10;position:absolute;top:'+(n.padtop+1)+"px;left:"+(n.padleft+1)+"px;width:"+n.width+"px;height:"+n.height+'px;overflow:hidden"></div>');t.find("ul .slide_mainmask").css({opacity:"0.0"});n.maxitem=0;t.find("ul >li").each(function(t){n.maxitem=n.maxitem+1;var r=e(this);var i=r.find("img:first");i.data("src",i.attr("src"));i.attr("src","")});for(var r=0;r<n.preloadedSlides;r++){i(t,n,r)}if(n.timerShow=="on")t.find(".slide_mainmask").append('<div class="kb-timer"></div>')}function r(e,t){for(var n=t.preloadedSlides;n<t.maxitem;n++){i(e,t,n)}}function i(n,r,i){n.find("ul >li").each(function(s){if(s==i){var o=e(this);o.find(".creative_layer").wrap('<div class="layer_container" style="position:absolute;left:0px;top:0px;width:'+r.width+"px;height:"+r.height+'px"></div>');o.wrapInner('<div class="slide_container" style="z-index:10;position:absolute;top:0px;left:0px;width:'+r.width+"px;height:"+r.height+'px;overflow:hidden"><div class="parallax_container" style="position:absolute;top:0pxleft:0px"><div class="kb_container"></div></div></div>');var u=e.browser.msie&&e.browser.version<9;if(o.find("img:first").data("bw")!=t&&o.find("img:first").data("bw").length>0&&!u)o.find(".kb_container").append('<img class="bw-main-image" src="'+o.find("img:first").data("bw")+'" style="position:absolute;top:0px;left:0px">');o.find("img:first").attr("src",o.find("img:first").data("src"));o.find(".slide_container").css({opacity:"0.0"});o.find(".slide_container .parallax_container .kb_container .video_container").each(function(){var t=e(this);t.closest(".slide_container").append('<div class="kenburn-video-overlay"></div>');t.closest(".slide_container").append('<div class="kenburn-video-button"></div>');t.closest(".slide_container").data("video",1);var i=t.closest(".slide_container").parent().find(".kenburn-video-button");var s=t.closest(".slide_container").parent().find(".kenburn-video-overlay");var o=parseInt(i.css("width"),0);var u=parseInt(i.css("height"),0);var a=parseInt(t.closest(".slide_container").css("width"),0);var f=parseInt(t.closest(".slide_container").css("height"),0);i.css({left:a/2-o/2+"px",top:f/2-u/2+"px"});i.data("top",n);i.data("url",t.html());t.remove();s.data("origopa",s.css("opacity"));i.hover(function(){var t=e(this);var n=t.parent().find(".kenburn-video-overlay");if(e.browser.msie)n.animate({opacity:"0.5"},{duration:100});else n.cssAnimate({opacity:"0.5"},{duration:100});if(e.browser.version>7&&e.browser.version<9){n.css({display:"block"})}},function(){var t=e(this);var n=t.parent().find(".kenburn-video-overlay");if(e.browser.msie)n.animate({opacity:n.data("origopa")},{duration:100});else n.cssAnimate({opacity:n.data("origopa")},{duration:100});if(e.browser.msie&&e.browser.version>7&&e.browser.version<9){n.css({display:"none"})}});i.click(function(){var t=e(this);var n=t.data("top");var i=n.find(".slide_mainmask");i.addClass("videoon");n.data("currentSlide").animate({top:r.height+"px"},{duration:500,queue:false});n.find(".slide_mainmask").append('<div class="video_container" style="z-index:9999;width:'+r.width+"px;height:"+r.height+'px">'+t.data("url")+"</div>");var s=n.find(".slide_mainmask .video_container");s.css({top:0-r.height+"px"});s.animate({top:"0px"},{duration:500,queue:false});s.find("* .close").click(function(){var e=n.find(".slide_mainmask");e.removeClass("videoon");n.data("currentSlide").animate({top:"0px"},{duration:600,queue:false});s.animate({top:0-r.height+"px"},{duration:600,queue:false});setTimeout(function(){s.remove()},600)})})})}})}function s(e,t){e.append('<div class="kenburn-bg" style="z-index:7;position:absolute;top:0px;left:0px;width:'+t.width+"px;height:"+t.height+'px;overflow:hidden"></div>');var n=e.find(".kenburn-bg");t.padtop=0;t.padleft=0;t.padright=0;t.padbottom=0;t.bordertop=0;t.borderleft=0;t.borderright=0;t.borderbottom=0;try{t.padtop=parseInt(n.css("paddingTop"),0)||0}catch(r){}try{t.padleft=parseInt(n.css("paddingLeft"),0)||0}catch(r){}try{t.padright=parseInt(n.css("paddingRight"),0)||0}catch(r){}try{t.padbottom=parseInt(n.css("paddingBottom"),0)||0}catch(r){}try{t.bordertop=parseInt(n.css("border-top-width"),0)||0}catch(r){}try{t.borderleft=parseInt(n.css("border-left-width"),0)||0}catch(r){}try{t.borderright=parseInt(n.css("border-right-width"),0)||0}catch(r){}try{t.borderbottom=parseInt(n.css("border-bottom-width"),0)||0}catch(r){}t.width=t.width-t.padleft-t.padright-t.borderleft-t.borderright;t.height=t.height-t.padtop-t.padbottom-t.bordertop-t.borderbottom;n.width(t.width);n.height(t.height);var i=t.width+t.padleft+t.padright+t.borderleft+t.borderright;e.closest(".kb_slider_wrapper").width(i)}function o(t,n){if(n.shadow=="true"||n.shadow==true||n.shadow=="on"){var r=n.width+n.padleft+n.padright+n.borderleft+n.borderright;t.closest(".kb_slider_wrapper").width(r);var i=r/2;if(i>50)i=50;r=r-2*i;var s=e('<div class="kenburn-leftshadow" style="top:'+(1+n.height+n.padtop+n.padbottom)+"px;left:0px;width:"+i+'px"></div>');var o=e('<div class="kenburn-rightshadow" style="top:'+(1+n.height+n.padtop+n.padbottom)+'px"></div>');var u=e('<div class="kenburn-repeatshadow" style="top:'+(1+n.height+n.padtop+n.padbottom)+"px;left:"+i+"px;width:"+r+'px"></div>');t.append(s);t.append(u);t.append(o)}else{var a=t.find(".kenburn_thumb_container")}}function u(t,n){var r=t.find("ul >li").length;if(r<n.thumbAmount)n.thumbAmount=r;var i=n.thumbAmount*n.thumbWidth+(n.thumbAmount-1)*n.thumbSpaces;var s=n.thumbHeight;var o=i-n.thumbSpaces+2*n.thumbPadding;var u=s+n.thumbPadding;var a=n.width+n.padleft+n.padright+n.borderleft+n.borderright;t.closest(".kb_slider_wrapper").width(a);var f=Math.round(a/2-o/2);var l=r*n.thumbWidth+(r-1)*n.thumbSpaces;t.append('<div class="kenburn_thumb_container" style="position:absolute;left:'+f+"px;top:"+(1+n.height+n.padtop+n.padbottom)+"px;width:"+(o+2)+"px;height:"+(u+2)+'px;"></div>');var c=t.find(".kenburn_thumb_container");if(n.thumbAmount==0)c.css({visibility:"hidden"});c.append('<div class="kenburn_thumb_container_bg" style="position:absolute;left:1px;top:0px;width:'+o+"px;height:"+u+'px"></div>');var p=/chrome/.test(navigator.userAgent.toLowerCase());if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){}else{c.find(".kenburn_thumb_container_bg").append('<div class="kenburn-repeatshadow" style="top:0px;left:'+ -2+"px;width:"+(o+4)+'px"></div>')}c.append('<div id="thumbmask" style="overflow:hidden;position:absolute;top:0px;left:'+(n.thumbPadding+1)+"px; width:"+(i-n.thumbSpaces)+"px;	height:"+n.thumbHeight+'px;overflow:hidden;"></div>');var d=c.find("#thumbmask");d.append('<div class="thumbsslide" style="width:'+l+'px"></div>');var v=d.find(".thumbsslide");t.find("ul >li").each(function(i){var s=e(this);var o=s.find("img:first");var u=o.data("thumb_bw");var a=o.data("thumb");var f=s.find(".slide_container").data("video")==9;var l=e('<div class="kenburn-thumbs" id="thumb'+i+'" style="cursor:pointer;position:absolute;top:0px;left:'+(i*n.thumbWidth+(i-1)*n.thumbSpaces)+"px;width:"+n.thumbWidth+"px;height:"+n.thumbHeight+"px;background:url("+u+');"></div>');l.data("id",i);if(i==r)l.css({"margin-right":"0px"});v.append(l);var c=e('<div id="over" style="cursor:pointer"><img id="over_img" src="'+a+'"></div>');l.append(c);var p=l.find("#over");p.css({opacity:"0.0"});if(e.browser.msie&&e.browser.version>7&&e.browser.version<9){p.css({display:"none"})}p.css({overflow:"hidden",position:"absolute",left:"0px",opacity:"0.0",height:n.thumbHeight+"px",width:n.thumbWidth+"px"});p.find("img").css({position:"absolute",left:"0px"});if(e.browser.msie){p.animate({left:"0px",opacity:"0.0",height:n.thumbHeight+"px",width:n.thumbWidth+"px"},{duration:50,queue:false});p.find("img").animate({left:"0px"},{duration:50,queue:false})}else{p.cssAnimate({left:"0px",opacity:"0.0",height:n.thumbHeight+"px",width:n.thumbWidth+"px"},{duration:50,queue:false});p.find("img").cssAnimate({left:"0px"},{duration:50,queue:false})}if(n.shadow=="true"||n.shadow==true||n.shadow=="on"){var d=/chrome/.test(navigator.userAgent.toLowerCase());if(!d){var m=e('<div class="kenburn-repeatshadow" style="position:relative;margin-left:0px;width:'+n.thumbWidth+'px;"></div>');if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){}else{l.append(m)}}}var g=v.find("#thumb"+i);g.hover(function(){var t=e(this).find("#over");if(!t.parent().hasClass("selected")){if(e.browser.msie){if(e.browser.msie&&e.browser.version>7&&e.browser.version<9)t.css({display:"block"});else t.animate({opacity:"1.0"},{duration:300,queue:false})}else{t.css({left:"0px",display:"block"});t.find("img").css({display:"block",opacity:"1.0",left:"0px"});t.cssAnimate({opacity:"1.0"},{duration:300,queue:false})}}},function(){var t=e(this).find("#over");if(!t.parent().hasClass("selected")){if(e.browser.msie){if(e.browser.msie&&e.browser.version>7&&e.browser.version<9)t.css({display:"none"});else t.animate({opacity:"0"},{duration:300,queue:false})}else{t.cssAnimate({opacity:"0.0"},{duration:300,queue:false})}}});g.click(function(){var r=e(this);if(!r.hasClass("selected")){var i=t.find("ul li:eq("+r.data("id")+")");h(t.data("currentSlide"),i,t,n)}})});if(i<l){e(document).mousemove(function(t){e("body").data("mousex",t.pageX)});var m=l-i;t.data("thumbnailmaxdif",m);var g=m/(i-n.thumbWidth);d.data("steps",g);d.data("thw",n.thumbWidth);d.data("maxw",m);d.mouseenter(function(){var t=e(this);if(n.pauseOnRollOverThumbs!="off")t.addClass("overme");var r=t.offset();var i=e("body").data("mousex")-r.left;i=i-t.data("thw")/2;var s=t.data("steps");var o=0-s*i;if(o>0)o=0;if(o<0-m)o=0-m;if(n.pauseOnRollOverMain!="off")t.addClass("overon");t.find(".thumbsslide").css({position:"absolute"});if(e.browser.msie)t.find(".thumbsslide").animate({left:o+"px"},{duration:200,queue:false});else t.find(".thumbsslide").cssAnimate({left:o+"px"},{duration:200,queue:false})});d.mousemove(function(){var t=e(this);if(n.pauseOnRollOverThumbs!="off")t.addClass("overme");var r=t.offset();var i=e("body").data("mousex")-r.left;i=i-t.data("thw")/2;var s=t.data("steps");var o=0-s*i;if(o>0)o=0;if(o<0-m)o=0-m;if(!t.hasClass("overon")){t.find(".thumbsslide").css({position:"absolute"});if(e.browser.msie)t.find(".thumbsslide").animate({left:o+"px"},{duration:0,queue:false});else t.find(".thumbsslide").cssAnimate({left:o+"px"},{duration:0,queue:false})}else{setTimeout(function(){t.removeClass("overon")},100)}});d.mouseout(function(){var t=e(this);t.removeClass("overme")})}if(n.thumbAmount==0||n.thumbStyle=="none"){c.css({visibility:"hidden"});t.css({width:a+"px"})}else{t.css({width:a+"px",height:n.height+u+"px"})}}function a(t,n){var r=t.find("ul >li").length;var i=n.width+n.padleft+n.padright;t.append('<div class="thumbbuttons"><div class="grainme"><div class="leftarrow"></div><div class="thumbs"></div><div class="rightarrow"></div></div></div>');var s=t.find(".leftarrow");var o=t.find(".rightarrow");o.click(function(){var e=t.data("currentSlide");if(e.index()<n.maxitem-1){var r=t.find("ul li:eq("+(e.index()+1)+")")}else{var r=t.find("ul li:first")}h(e,r,t,n)});s.click(function(){var e=t.data("currentSlide");if(e.index()>0){var r=t.find("ul li:eq("+(e.index()-1)+")")}else{var r=t.find("ul li:eq("+(n.maxitem-1)+")")}h(e,r,t,n)});var u=t.find(".thumbs");t.find("ul >li").each(function(r){var i=e(this);var s=e('<div class="minithumb" id="minithumb'+r+'"></div>');s.data("id",r);u.append(s);s.click(function(){var r=e(this);if(!r.hasClass("selected")){var i=t.find("ul li:eq("+r.data("id")+")");h(t.data("currentSlide"),i,t,n)}})});u.waitForImages(function(){var e=parseInt(u.parent().parent().position().top,0);u.parent().parent().css({top:e+n.bulletYOffset+"px",left:i/2-parseInt(u.parent().width(),0)/2+n.bulletXOffset+"px"})})}function f(t,n){if(e.browser.msie){t.find(".kenburn-preloader").animate({opacity:"0.0"},{duration:300,queue:false})}else{t.find(".kenburn-preloader").cssAnimate({opacity:"0.0"},{duration:300,queue:false})}setTimeout(function(){t.find(".kenburn-preloader").remove()},300);var r=t.find("ul li:first");h(r,r,t,n);l(t,n);n.loaded=1}function l(t,n){var r=t.find(".slide_mainmask");r.data("maxwidth",n.width+n.padleft+n.padright);r.data("maxheight",n.height+n.padtop+n.padbottom);r.data("pdistance",n.parallaxX);r.data("pdistancey",n.parallaxY);r.data("cdistance",n.captionParallaxX);r.data("cdistancey",n.captionParallaxY);r.data("opt",n);e("body").append('<div id="mpinfo" style="z-index:1000000;background-color:#fff;position:absolute;top:10px;left:10px;font-size:15px"></div>');var i=r.parent().data("currentSlide");var s=r.find(".parallax_container");var o=i.find(".layer_container");r.mouseenter(function(t){var n=e(this);var r=n.parent().find(".kenburn_thumb_container #thumbmask");var i=n.parent().data("currentSlide");var s=i.find(".parallax_container");var o=i.find(".layer_container");n.addClass("overon");n.append('<div class="kb-pause"></div>')});r.mouseleave(function(t){var n=e(this);var r=n.parent().data("currentSlide");var i=r.find(".parallax_container");var s=r.find(".layer_container");n.removeClass("overme");n.addClass("overon");n.find(".kb-pause").remove()});r.mousemove(function(t){var r=e(this);if(n.pauseOnRollOverMain!="off")r.addClass("overme");var i=r.parent().find(".kenburn_thumb_container #thumbmask");if(!i.hasClass("overme")&&!r.hasClass("overon")){var s=r.parent().data("currentSlide");var o=s.find(".parallax_container");var u=s.find(".layer_container")}else{setTimeout(function(){r.removeClass("overon")},100)}})}function c(){var e="";var t=Math.floor(Math.random()*3);var n=Math.floor(Math.random()*3);if(t==0)e="left";else if(t==1)e="center";else e="right";if(n==0)e=e+",top";else if(n==1)e=e+",center";else e=e+",bottom";return e}function h(n,r,i,s){var o=false;i.find("ul >li").each(function(t){var i=e(this);if(i.index()!=n.index()&&i.index()!=r.index()){i.css({display:"none",position:"absolute",left:"0px","z-index":"994"})}});var u=i.find(".slide_mainmask .video_container");setTimeout(function(){u.remove()},600);var a=i.find(".slide_mainmask");a.removeClass("videoon");n.css({position:"absolute",top:"0px",left:"0px","z-index":"900"});r.css({position:"absolute",top:"0px",left:"0px","z-index":"1000"});r.css({display:"block"});var f=r.find("img:first");var l=r.find(".bw-main-image");if(r.data("ww")==t){var h=r.find("img").width();var d=r.find("img").height();if(h!=0){if(f.width()>0&&f.width()<s.width){var m=s.width/h;h=h*m;d=d*m}if(f.height()>0&&f.height()<s.height){var m=s.height/d;h=h*m;d=d*m}r.data("ww",h);r.data("hh",d)}}else{var h=r.data("ww");var d=r.data("hh")}var g=0;var y=0;var b=0;var w=0;var E=r.data("startalign");var S=r.data("endalign");if(E=="random")E=c();if(S=="random")S=c();if(E!=t){var x=E;var T=x.split(",")[0];var N=x.split(",")[1];if(T=="left")y=0;else if(T=="center")y=s.width/2-h/2;else if(T=="right")y=0-Math.abs(s.width-h);if(N=="top")g=0;else if(N=="center")g=s.height/2-d/2;else if(N=="bottom")g=0-Math.abs(s.height-d)}if(S!=t){var C=S;var T=C.split(",")[0];var N=C.split(",")[1];if(T=="left")w=0;else if(T=="center")w=s.width/2-h/2;else if(T=="right")w=0-Math.abs(s.width-h);if(N=="top")b=0;else if(N=="center")b=s.height/2-d/2;else if(N=="bottom")b=0-Math.abs(s.height-d)}clearInterval(n.data("interval"));f.parent().find(".canvas-now").remove();f.parent().find(".canvas-now-bw").remove();var k=p();var L=e.browser.msie&&e.browser.version<9;if(L)k=false;if(k){f.parent().append('<div style="position:absolute;z-index:1" class="canvas-now"><canvas class="canvas-now-canvas" width="'+h+'" height="'+d+'"></canvas></div>');f.css({display:"none"});var A=f.parent().find(".canvas-now-canvas")[0];var O=A.getContext("2d");if(l.length>0){f.parent().append('<div style="position:absolute;z-index:20" class="canvas-now-bw"><canvas class="canvas-now-canvas-bw" width="'+h+'" height="'+d+'"></canvas></div>');l.css({display:"none"});var M=f.parent().find(".canvas-now-canvas-bw")[0];var _=M.getContext("2d")}}else{}var D=r.data("panduration");var P=0;var H=0;var B=h;var j=d;var F=r.data("zoomfact");var I=r.data("zoom");if(I=="random"){if(Math.floor(Math.random()*2)==0)I="out";else I="in"}if(r.data("zoomfact")=="random"){F=Math.random()*1+1}if(I=="out"){B=B*F;j=j*F;y=y*F;g=g*F}var q=(w-y)/(D*25);var R=(b-g)/(D*25);var U=1/(D*25);P=h*F/(D*25)/10;H=d*F/(D*25)/10;if(I=="out"){P=P*-1;H=H*-1}if(r.data("endalign")!=t){var C=r.data("endalign");var T=C.split(",")[0];var N=C.split(",")[1];if(T=="left")q=q+P/4;else if(T=="center")q=q-P/2;else if(T=="right")q=q-P;if(N=="top")R=R+H/4;else if(N=="center")R=R-H/2;else if(N=="bottom")R=R-H}if(s.timer>parseInt(r.data("panduration"),0)*10){s.timer=parseInt(r.data("panduration"),0)*10}else{s.timer=s.savedTimer*10}if(k){O.drawImage(f[0],y,g,B,j);if(l.length>0){_.drawImage(l[0],y,g,B,j);setTimeout(function(){f.parent().find(".canvas-now-bw").cssAnimate({opacity:"0.0"},{duration:r.data("colortransition")*1e3,queue:false})},500)}}f.cssStop(true,true);l.cssStop(true,true);f.css({position:"absolute",left:y+"px",top:g+"px",width:B+"px",height:j+"px",opacity:1});l.css({position:"absolute",left:y+"px",top:g+"px",width:B+"px",height:j+"px",opacity:1});var z=y;var W=g;var X=B;step=0;r.data("interval",setInterval(function(){if(!i.parent().parent().find(".kenburn_thumb_container #thumbmask").hasClass("overme")&&!i.find(".slide_mainmask").hasClass("overme")&&!i.find(".slide_mainmask").hasClass("videoon")){B=B+P;j=j+H;y=y+q;g=g+R;if(y>0)y=0;if(g>0)g=0;if(y<s.width-B)y=s.width-B;if(g<s.height-j)g=s.height-j;if(k){O.drawImage(f[0],y,g,B,j);if(l.length>0)_.drawImage(l[0],y,g,B,j)}else{var e=B/X;var t=y-z;var n=g-W;if(jQuery.browser.msie){f.css({filter:'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+e+",M12=0,M21=0,M22="+e+",Dx="+t+",Dy="+n+")"});f.css({"-ms-filter":'progid:DXImageTransform.Microsoft.Matrix(FilterType="bilinear",M11='+e+",M12=0,M21=0,M22="+e+",Dx="+t+",Dy="+n+")"});l.remove()}else{f.cssAnimate({left:y+"px",top:g+"px",width:B+"px",height:j+"px"},{duration:38,easing:"linear",queue:false});if(l.length>0&&l.css("opacity")>0){l.cssAnimate({left:y+"px",top:g+"px",width:B+"px",height:j+"px"},{duration:38,easing:"linear",queue:false});l.css({opacity:l.css("opacity")-U})}}}}},40));var V=/chrome/.test(navigator.userAgent.toLowerCase());if(V&&s.repairChromeBug=="on"){r.data("transition","slide")}if(n.index()!=r.index()){setTimeout(function(){n.find(".canvas-now").css({visibility:"hidden"});n.find(".canvas-now-bw").css({visibility:"hidden"})},550)}if(r.data("transition")=="slide"){if(o==false){var J=true;if(n.index()>r.index())J=false;if(J){u.animate({left:0-s.width+"px"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:"1.0",left:s.width+"px"});n.find(".slide_container").animate({left:0-s.width+"px"},{duration:600,queue:false});r.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}else{u.animate({left:s.width+"px"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:"1.0",position:"absolute",top:"0px",left:0-s.width+"px"});n.find(".slide_container").animate({left:s.width+"px"},{duration:600,queue:false});r.find(".slide_container").animate({left:"0px",top:"0px",opacity:"1.0"},{duration:600,queue:false})}}}else{n.find(".slide_container").stop(true,true);n.find(".slide_container").animate({opacity:0},{duration:600,queue:false});u.animate({opacity:"0.0"},{duration:600,queue:false});r.find(".slide_container").stop(true,true);r.find(".slide_container").css({opacity:0,left:"0px",top:"0px"});r.find(".slide_container").animate({opacity:1},{duration:600,queue:false})}if(i.find(".kenburn_thumb_container").length>0){var K=i.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+r.index()+" #over");i.find(".kenburn_thumb_container #thumbmask .thumbsslide #thumb"+n.index()).each(function(t){var n=e(this);if(n.attr("id")!="thumb"+r.index()){n.removeClass("selected");var i=n.find("#over");i.stop();i.css({position:"absolute",opacity:"0.0"});setTimeout(function(){i.find("img").css({position:"absolute",left:"0px"})},30);if(e.browser.msie){i.animate({left:"0px",height:s.thumbHeight+"px",width:s.thumbWidth+"px"},{duration:1,queue:false})}else{i.cssAnimate({left:"0px",height:s.thumbHeight+"px",width:s.thumbWidth+"px"},{duration:1,queue:false})}if(e.browser.msie&&e.browser.version>7&&e.browser.version<9)i.css({display:"none"})}});K.parent().addClass("selected");K.animate({opacity:"1.0"},{duration:300,queue:false});if(e.browser.msie&&e.browser.version>7&&e.browser.version<9)K.css({display:"block"});i.data("currentThumb",K)}if(i.find(".minithumb").length>0){var K=i.find("#minithumb"+r.index());i.find(".minithumb").removeClass("selected");K.addClass("selected");if(s.thumbStyle!="both")i.data("currentThumb",K)}i.data("currentSlide",r);v(r,100,i);s.cd=0;if(r.index()==s.maxitem-1&&s.stopAtLast=="true"){s.lastReached=true;n.parent().parent().parent().find(".kb-timer").hide();setTimeout(function(){clearInterval(r.data("interval"))},s.timer*100)}else{s.lastReached=false}}function p(){var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}function d(n,r){r.cd=0;if(r.thumbStyle=="image"||r.thumbStyle=="both"||r.thumbStyle=="thumb"){if(e.browser.msie)n.find(".kenburn_thumb_container #thumbmask .thumbsslide").cssAnimate({left:"0px"},{duration:300,queue:false});else n.find(".kenburn_thumb_container #thumbmask .thumbsslide").animate({left:"0px"},{duration:300,queue:false});var i=n.find(".kenburn_thumb_container #thumbmask");var s=i.find(".thumbsslide");var o=n.find(".slide_mainmask");var u=setInterval(function(){if(r.loaded==1&&!r.lastReached){var t=n.data("currentSlide");var u=n.data("currentThumb");if(!i.hasClass("overme")&&!o.hasClass("overme")&&!o.hasClass("videoon")){r.cd=r.cd+1;var a=Math.floor(r.thumbWidth*(r.cd/r.timer));try{n.find(".kb-timer").animate({width:r.cd/r.timer*100+"%"},{duration:100,queue:false})}catch(f){}if(r.cd==r.timer){r.cd=0;if(t.index()<r.maxitem-1){var l=n.find("ul li:eq("+(t.index()+1)+")");h(t,l,n,r);var c=0-parseInt(u.parent().css("left"),0);s.css({position:"absolute"});if(Math.abs(c)<=n.data("thumbnailmaxdif")){if(e.browser.msie)s.animate({left:c+"px"},{duration:300,queue:false});else s.cssAnimate({left:c+"px"},{duration:300,queue:false})}else{c=0-n.data("thumbnailmaxdif");if(e.browser.msie)s.animate({left:c+"px"},{duration:300,queue:false});else s.cssAnimate({left:c+"px"},{duration:300,queue:false})}}else{h(t,n.find("ul li:first"),n,r);if(e.browser.msie)s.animate({left:"0px"},{duration:300,queue:false});else s.cssAnimate({left:"0px"},{duration:300,queue:false})}}}}},100)}else{var o=n.find(".slide_mainmask");setInterval(function(){if(r.loaded==1&&!r.lastReached){var i=n.data("currentSlide");var u=n.data("currentThumb");if(!o.hasClass("overme")&&!o.hasClass("videoon")){r.cd=r.cd+1;try{n.find(".kb-timer").animate({width:r.cd/r.timer*100+"%"},{duration:100,queue:false})}catch(a){}if(r.cd==r.timer){r.cd=0;if(i.index()<r.maxitem-1){var f=n.find("ul li:eq("+(i.index()+1)+")");h(i,f,n,r);if(r.thumbStyle!="none"){var l=0-parseInt(u.parent().css("left"),0);if(s!=null&&s!=t){s.css({position:"absolute"});if(Math.abs(l)<=n.data("thumbnailmaxdif")){if(e.browser.msie)s.animate({left:l+"px"},{duration:300,queue:false});else s.cssAnimate({left:l+"px"},{duration:300,queue:false})}else{l=0-n.data("thumbnailmaxdif");if(e.browser.msie)s.animate({left:l+"px"},{duration:300,queue:false});else s.cssAnimate({left:l+"px"},{duration:300,queue:false})}}}}else{h(i,n.find("ul li:first"),n,r);if(s!=null&&s!=t){if(e.browser.msie)s.animate({left:"0px"},{duration:300,queue:false});else s.cssAnimate({left:"0px"},{duration:300,queue:false})}}}}}},100)}}function v(n,r,i){var s=2;n.find(".creative_layer div").each(function(n){var i=e(this);if(i.data("_top")==t)i.data("_top",parseInt(i.css("top"),0));if(i.data("_left")==t)i.data("_left",parseInt(i.css("left"),0));if(i.data("_op")==t){i.data("_op",i.css("opacity"))}i.css({"z-index":1200});if(i.hasClass("fadeup")){i.animate({top:i.data("_top")+20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({top:i.data("_top")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("faderight")){i.animate({left:i.data("_left")-20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({left:i.data("_left")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fadedown")){i.animate({top:i.data("_top")-20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({top:i.data("_top")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fadeleft")){i.animate({left:i.data("_left")+20+"px",opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({left:i.data("_left")+"px",opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("fade")){i.animate({opacity:0},{duration:0,queue:false}).delay(r+(s+1)*350).animate({opacity:i.data("_op")},{duration:500,queue:true});s++}if(i.hasClass("wipeup")||i.hasClass("wipedown")||i.hasClass("wipeleft")||i.hasClass("wiperight")){i.animate({opacity:0},{duration:0,queue:false});setTimeout(function(){if(i.find(".wipermode").length==0){var e=i.outerWidth();var t=i.outerHeight();var n={color:i.css("backgroundColor"),border:i.css("border"),borderradiusmoz:i.css("-moz-border-radius-topleft"),borderradiusweb:i.css("-webkit-border-top-left-radius"),borderradius:i.css("borderTopLeftRadius"),boxmoz:i.css("-moz-box-shadow"),boxweb:i.css("-webkit-box-shadow"),box:i.css("box-shadow"),padtop:"0px",padleft:"0px",paddingT:parseInt(i.css("paddingTop"),0),paddingB:parseInt(i.css("paddingBottom"),0),paddingL:parseInt(i.css("paddingLeft"),0),paddingR:parseInt(i.css("paddingRight"),0),ww:e+30,hh:t+20};i.data("params",n);i.wrapInner('<div style="position:absolute;overflow:hidden;width:'+(e-(n.paddingL+n.paddingR))+"px;height:"+(t-(n.paddingT+n.paddingB))+'px;"><div class="wipermode-origin" style="top:0px;left:0px;position:absolute;width:'+e+"px;height:"+t+'px;"></div></div>');i.prepend('<div class="wipermode" style="width:'+e+"px;height:"+t+"px;background-color:"+n.color+";top:0px;left:0px;position:absolute;border-radius:"+n.borderradius+";-moz-border-radius:"+n.borderradiusmoz+";-webkit-border-radius:"+n.borderradiusweb+";-moz-box-shadow:"+n.boxmoz+";-webkit-box-shadow:"+n.boxweb+";box-shadow:"+n.box+';"></div>');i.css({background:"none"})}var n=i.data("params");i.stop(true,true).find(".wipermode-origin");i.stop(true,true);i.find(".wipermode").stop(true,true);if(i.hasClass("wipeup")){i.find(".wipermode-origin").css({top:-1*n.hh+"px",left:n.padleft});i.find(".wipermode").css({top:n.hh+"px"})}else{if(i.hasClass("wipedown")){i.find(".wipermode-origin").css({top:n.hh+"px",left:n.padleft});i.find(".wipermode").css({top:-1*n.hh+"px"})}else{if(i.hasClass("wipeleft")){i.find(".wipermode-origin").css({top:n.padtop,left:-1*n.ww+"px"});i.find(".wipermode").css({left:n.ww+"px"})}else{i.find(".wipermode-origin").css({top:n.padtop,left:n.ww+"px"});i.find(".wipermode").css({left:-1*n.ww+"px"})}}}i.animate({opacity:"1.0"},{duration:300,queue:false});i.find(".wipermode-origin").animate({top:n.padtop,left:n.padleft},{duration:500,easing:"easeOutSine",queue:false});i.find(".wipermode").animate({top:"0px",left:"0px"},{duration:500,easing:"easeOutExpo",queue:false})},r+(s+1)*350);s++}if(i.hasClass("masklesswipeup")||i.hasClass("masklesswipedown")||i.hasClass("masklesswipeleft")||i.hasClass("masklesswiperight")){i.animate({opacity:0},{duration:0,queue:false});setTimeout(function(){if(i.find(".masklesswipemode").length==0){var e=i.outerWidth();var t=i.outerHeight();var n={color:i.css("backgroundColor"),border:i.css("border"),borderradiusmoz:i.css("-moz-border-radius-topleft"),borderradiusweb:i.css("-webkit-border-top-left-radius"),borderradius:i.css("borderTopLeftRadius"),boxmoz:i.css("-moz-box-shadow"),boxweb:i.css("-webkit-box-shadow"),box:i.css("box-shadow"),padtop:i.css("paddingTop"),padleft:i.css("paddingLeft")};i.data("params",n);i.wrapInner('<div class="masklesswipemode-origin" style="top:0px;left:0px;position:absolute;width:'+e+"px;height:"+t+'px;"></div>');i.prepend('<div class="masklesswipemode" style="width:'+e+"px;height:"+t+"px;background-color:"+n.color+";top:0px;left:0px;position:absolute;border-radius:"+n.borderradius+";-moz-border-radius:"+n.borderradiusmoz+";-webkit-border-radius:"+n.borderradiusweb+";-moz-box-shadow:"+n.boxmoz+";-webkit-box-shadow:"+n.boxweb+";box-shadow:"+n.box+';"></div>');i.css({background:"none"})}var n=i.data("params");i.stop(true,true).find(".masklesswipemode-origin");i.stop(true,true);i.find(".masklesswipemode").stop(true,true);var r=50;if(i.hasClass("wipeup")){i.find(".masklesswipemode-origin").css({top:-1*r+"px",left:n.padleft});i.find(".masklesswipemode").css({top:r+"px"})}else{if(i.hasClass("masklesswipedown")){i.find(".masklesswipemode-origin").css({top:r+"px",left:n.padleft});i.find(".masklesswipemode").css({top:-1*r+"px"})}else{if(i.hasClass("masklesswipeleft")){i.find(".masklesswipemode-origin").css({top:n.padtop,left:-1*r+"px"});i.find(".masklesswipemode").css({left:r+"px"})}else{i.find(".masklesswipemode-origin").css({top:n.padtop,left:r+"px"});i.find(".masklesswipemode").css({left:-1*r+"px"})}}}i.animate({opacity:"1.0"},{duration:800,queue:false});i.find(".masklesswipemode-origin").animate({top:n.padtop,left:n.padleft},{duration:800,easing:"easeInExpo",queue:false});i.find(".masklesswipemode").animate({top:"0px",left:"0px"},{duration:800,easing:"easeOutExpo",queue:false})},r+(s+1)*350);s++}})}e.fn.extend({kenburn:function(i){var l={width:876,height:300,thumbWidth:90,thumbHeight:50,thumbAmount:6,thumbSpaces:4,thumbPadding:4,thumbStyle:"bullet",bulletXOffset:0,bulletYOffset:0,shadow:"true",timer:2e3,touchenabled:"on",pauseOnRollOverThumbs:"off",pauseOnRollOverMain:"on",preloadedSlides:50,googleFonts:"PT+Sans+Narrow:400,700",googleFontJS:"http://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",debug:"no"};i=e.extend({},e.fn.kenburn.defaults,i);WebFontConfig={google:{families:[i.googleFonts]},active:function(){jQuery("body").data("googlefonts","loaded")},inactive:function(){jQuery("body").data("googlefonts","loaded")}};return this.each(function(){var l=i;if(l.bulletXOffset==t)l.bulletXOffset=0;if(l.bulletYOffset==t)l.bulletYOffset=0;if(l.googleFonts!=t&&l.googleFonts.length>0){var c=document.createElement("script");c.src=l.googleFontJS;c.type="text/javascript";c.async="true";var p=document.getElementsByTagName("script")[0];p.parentNode.insertBefore(c,p);jQuery("body").data("googlefonts","wait")}else{jQuery("body").data("googlefonts","loaded")}l.savedTimer=l.timer;var v=e(this);if(l.shuffle=="on"){for(var m=0;m<v.find(">ul:first-child >li").length;m++){var g=Math.round(Math.random()*v.find(">ul:first-child >li").length);v.find(">ul:first-child >li:eq("+g+")").prependTo(v.find(">ul:first-child"))}}if(l.debug==="on")e("body").append('<div class="khinfo" style="background:#fff;color:#000;width:300px;height:250px;position:fixed;left:10px;top:10px;"></div>');v.css({width:l.width+"px",height:l.height+"px"});v.append('<div class="kenburn-preloader"></div>');e("body").find(".khinfo").html("Start Slider");s(v,l);e("body").find(".khinfo").html("Prepared Container");n(v,l);e("body").find(".khinfo").html("Prepared Preloaded Slides");if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)){}else{o(v,l)}e("body").find(".khinfo").html("Prepared Shadows");e("body").find(".khinfo").html("Waiting for Images...");l.loadedImages=0;v.waitForImages(function(){e("body").find(".khinfo").html("Preloaded Images has been loaded");var n=setInterval(function(){e("body").find(".khinfo").html("Waiting for Google Fonts");if(e("body").data("googlefonts")!=t&&e("body").data("googlefonts")=="loaded"){if(l.thumbStyle=="image"||l.thumbStyle=="both"||l.thumbStyle=="thumb")u(v,l);if(l.thumbStyle=="bullet"||l.thumbStyle=="both")a(v,l);e("body").find(".khinfo").html("Google Fonts are here");clearInterval(n);f(v,l);e("body").find(".khinfo").html("Rotation Started");r(v,l)}},10)},function(){e("body").find(".khinfo").html(l.loadedImages+". Image has been Loaded");l.loadedImages=l.loadedImages+1});d(v,l);if(l.touchenabled=="on")v.swipe({swipeLeft:function(){var e=v.data("currentSlide");if(e.index()<l.maxitem-1){var t=v.find("ul li:eq("+(e.index()+1)+")")}else{var t=v.find("ul li:first")}h(e,t,v,l)},swipeRight:function(){var e=v.data("currentSlide");if(e.index()>0){var t=v.find("ul li:eq("+(e.index()-1)+")")}else{var t=v.find("ul li:eq("+(l.maxitem-1)+")")}h(e,t,v,l)},excludedElements:".close, .kenburn-video-overlay, .kenburn-video-button, .hover-more-sign, .hover-blog-link-sign .thumbnails, .closebutton",allowPageScroll:"auto"})})}})})(jQuery)