!function(i){function t(t){function s(){var t=Y.width,s=Y.height;et.width=i(window).width(),et.height=i(window).height(),R="",G=$=0,F=D=0,mp_flag=tp_flag=V=B=J=Q=0,st=0,tt=E.find(".bs_slide").length,Z=Y.width/Y.height,E.append('<div id="bs_shadow"><div class="bs_lshadow"></div><div class="bs_mshadow" style="width:'+(t-100)+'px"></div><div class="bs_rshadow"></div></div>'),E.append('<div class="bs_a_play default_play"></div><div id="bs_lbox"></div>'),E.find("#bs_viewport").prepend("<div id='bs_prev' class='bs_operate'></div><div id='bs_current' class='bs_operate bs_animate'></div><div id='bs_next' class='bs_operate bs_animate'></div>"),E.find(".bs_slide").each(function(){var t=i(this),s=t.attr("image-src"),e=t.attr("data-caption"),n=t.attr("data-description"),a=t.attr("video-src"),r=t.attr("data-link");void 0===r&&(r="#"),void 0===a&&(a=""),t.append("<img class='bs_image' src='"+s+"' data-src='"+a+"'/>"),void 0!==e&&t.append("<div class='bs_caption'><div><a class='bs_title' href='"+r+"'>"+e+"</a></div><div><a class='bs_des'>"+n+"</a></div></div>"),""!=a&&t.append("ios7"==Y.skin||"starworld"==Y.skin||"nature"==Y.skin||"xmas"==Y.skin||1==Y.fullwidth?"<img class='bs_play' src='"+Y.path+"img/skin/"+Y.skin+"_play.png'/>":"<img class='bs_play' src='"+Y.path+"img/skin/play.png'/>"),t.find(".bs_image").on("load",function(){i(this).addClass("active")}),i(this).find(".bs_layer").each(function(){i(this).attr("o-width",i(this).width()).attr("o-height",i(this).height()).attr("o-lft",i(this).css("left")).attr("o-top",i(this).css("top")).attr("o-rgt",i(this).css("right")).attr("o-btm",i(this).css("bottom"))})});var n=parseInt(E.find(".bs_slide .bs_caption").css("font-size"));"transformer"==Y.skin?n=50:"beach"==Y.skin&&(n=40),Y.fullwidth?E.css("width",t).css("height",s).attr("o-width",et.width).attr("o-height",et.height).attr("o-font",n):E.css("width",t).css("height",s).attr("o-width",t).attr("o-height",s).attr("o-font",n),Z=t/s,e(F,0),i().framerate(100)}function e(t,s){var e=0>t-1?tt-1:t-1,n=(t+1)%tt,r=[e,t,n],o=["#bs_prev","#bs_current","#bs_next"];E.find(".bs_operate").each(function(t){i(this).css("margin-left",0);var e=E.find(o[t]),n=E.find(".bs_slide:nth-child("+(r[t]+1)+")");e.html(n.html());var d=void 0!=n.attr("kzoom")?n.attr("kzoom"):1,c=void 0!=n.attr("kposx")?n.attr("kposx"):0,h=void 0!=n.attr("kposy")?n.attr("kposy"):0,b=void 0!=n.attr("qtype")?parseInt(n.attr("qtype")):0;if(1==b&&1==d&&(b=4),e.attr("kzoom",d),e.attr("kposx",c),e.attr("kposy",h),e.attr("qtype",b),e.find(".bs_image").addClass("zoompa"+b),n.find(".bs_image").hasClass("active")){var l=e.attr("kzoom");1==l?e.find(".bs_image").attr("width",Y.width):2==l&&e.find(".bs_image").attr("width",2*Y.width).attr("height",2*Y.height).css("margin-left",-parseInt(e.find(".bs_image").width()-Y.width)/2).css("margin-top",-parseInt(e.find(".bs_image").height()-Y.height)/2)}else e.prepend("<img class='bs_load' src='"+Y.path+"img/skin/"+Y.skin+"_loader.gif' />"),e.find(".bs_image").on("load",function(){var e=i(this).parents(".bs_operate").attr("kzoom");1==e?i(this).attr("width",Y.width):2==e&&i(this).attr("width",2*Y.width).attr("height",2*Y.height).css("margin-left",-parseInt(Y.width)/2).css("margin-top",-parseInt(Y.height)/2),i(this).addClass("active"),i(this).parent().find(".bs_load").remove(),1==t&&0==s&&a()})}),Y.responsive&&M()}function n(){switch(Y.skin){case"default":Y.caption_animation=2,Y.progressbartype="linear";break;case"jumbo":Y.caption_animation=2,Y.progressbartype="linear",E.find("#bs_shadow").html('<img src="img/skin/jumbo_shadow.png">'),E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>');break;case"science":Y.caption_animation=2,Y.progressbartype="linear";break;case"sapphire":Y.caption_animation=2,Y.progressbartype="circle",R="#26a9fb",E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>');break;case"ios7":Y.caption_animation=2,Y.progressbartype="linear",Y.navtype=1,E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>'),nt=60;break;case"starworld":Y.caption_animation=0,Y.progressbartype="linear",Y.navtype=0,E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>');break;case"nature":Y.caption_animation=0,Y.progressbartype="linear";break;case"xmas":Y.caption_animation=0,Y.progressbartype="circle",R="#fff";break;case"transformer":Y.caption_animation=3,Y.progressbartype="linear",Y.navtype=1,E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>'),E.find("#bs_shadow").html('<img src="img/skin/transformer_shadow.png">');break;case"beach":Y.caption_animation=3,Y.progressbartype="linear",Y.navtype=1,E.append('<a id="left_btn" class="bs_nav">Previous Slide</a><a id="right_btn" class="bs_nav right_btn">Next Slide</a>'),E.find("#bs_shadow").html('<img src="img/skin/beach_shadow.png">'),nt=90}0==Y.navtype?(Y.bullet=!0,Y.carousel=!0):(Y.bullet=!1,Y.carousel="starworld"!=Y.skin&&"xmas"!=Y.skin&&"transformer"!=Y.skin?"horizontal":"vertical"),Y.bullet&&(o(E),E.find(".bs_hcarousel").addClass("bs_bullet")),0!=Y.carousel&&d(Y.carousel,E),E.addClass("bs_"+Y.skin),"jumbo"==Y.skin?E.prepend('<img src="'+Y.path+'img/ribbon.png" style="position:absolute;left:-20px;top:-20px;z-index:100;"/>'):"starworld"==Y.skin?E.prepend('<div id="bs_numboard">1 / '+tt+"</div>"):"sapphire"==Y.skin?E.prepend('<div id="bs_sapphire_header"></div>'):"xmas"==Y.skin&&E.prepend("<div id='bs_lbal' class='bs_balcony'><img src='"+Y.path+"img/skin/xmas_bal.png'/></div><div id='bs_rbal' class='bs_balcony'><img src='"+Y.path+"img/skin/xmas_bal.png'/></div><div id='bs_tbal' class='bs_tbalcony'><img src='"+Y.path+"img/skin/xmas_tsnow.png'/></div>")}function a(){n(),1==Y.fullwidth&&(Y.width=window.innerWidth>screen.width?window.innerWidth:screen.width,E.css("margin-left",0).css("width",Y.width).css("height",Y.height)),1==Y.autoplay?(E.find(".bs_a_play").addClass("bs_a_pause"),B=1,m()):E.find(".bs_a_play").removeClass("bs_a_pause"),1==Y.progressbar&&(0!=_()&&_()<9&&(Y.progresstype="linear"),r()),E.find("#bs_thumbnail").css("width",st*E.find(".bs_slide").length),1==Y.responsive&&M(),W()}function r(){if(0==B)return!1;switch(Y.progressbartype){case"linear":0==E.find("#lp_ct").length&&E.find("#bs_viewport").prepend('<div id="lp_ct" class="progressbar"><div id="lprogress"></div></div>');break;case"circle":0==E.find("#cprogress").length&&E.find("#bs_viewport").prepend('<div id="cprogress" class="progressbar"><input class="knob cprogress" data-thinkness=".1" data-skin="tron" data-linecap="round" data-fgcolor='+R+' data-width="40" data-displayInput=false value="0"></div>'),E.find(".knob").knob({draw:function(){if("tron"==this.$.data("skin")){var i,t=this.angle(this.cv),s=this.startAngle,e=this.startAngle,n=e+t,a=1;return this.g.lineWidth=this.lineWidth,this.o.cursor&&(e=n-.3)&&(n+=.3),this.o.displayPrevious&&(i=this.startAngle+this.angle(this.v),this.o.cursor&&(s=i-.3)&&(i+=.3),this.g.beginPath(),this.g.strokeStyle=this.pColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,s,i,!1),this.g.stroke()),this.g.beginPath(),this.g.strokeStyle=a?this.o.fgColor:this.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth,e,n,!1),this.g.stroke(),this.g.lineWidth=2,this.g.beginPath(),this.g.strokeStyle=this.o.fgColor,this.g.arc(this.xy,this.xy,this.radius-this.lineWidth+1+2*this.lineWidth/3,0,2*Math.PI,!1),this.g.stroke(),!1}}})}0==Y.progress&&E.find(".progressbar").addClass("invisible")}function o(t){t.append('<div id="bs_bullet" style="height:35px;left:50%;"></div>'),i("<div class='bs_bt_preview'><div class='bs_filter_bt'><div class='bs_bt_container'></div></div></div>").insertAfter(t.find("#bs_bullet"));var s='<a id="bs_bleft" class="bs_bullet_btn" style="float:left;background:url(img/arrowleft.png);background-position:0 100%;width:9px;height:16px;z-index:301;margin:9px;"></a>';t.find(".bs_slide").each(function(e){var n;n="jumbo"==Y.skin?37*tt:54+33*tt,s+=0==e?'<a class="active bs_index" style="display:block;float:left;background:url(img/navidot.png);width:15px;height:15px;z-index:301;margin:9px;"></a>':'<a class="bs_index" style="display:block;float:left;background:url(img/navidot.png);background-position:0 100%;width:15px;height:15px;z-index:301;margin:9px;"></a>',e==tt-1&&(s+='<a id="bs_bright" class="bs_bullet_btn" style="float:left;background:url(img/arrowright.png);background-position:0 100%;width:9px;height:16px;z-index:301;top:9px;margin:9px;"></a>',i("#bs_bullet").append(s),i("#bs_bullet").css("width",n),i("#bs_bullet").css("margin-left",i("#bs_bullet").width()/2*-1)),t.find(".bs_bt_container").append("<div class='bs_bt_slide'><img class='bs_preview_img' src='"+i(this).find(".bs_image").attr("src")+"'/></div>")}),twidth=t.find(".bs_bt_slide").width(),"jumbo"==Y.skin?twidth=109:"sapphire"==Y.skin&&(twidth=50),t.find(".bs_bt_container").css("width",twidth*tt)}function d(t,s){var e=0,n=0;e=Y.width-100>nt*tt?nt*tt:Y.width-100,n=(Y.width-e)/2-8,s.append('<div id="bs_carousel" style="width:'+e+"px;height:80px;left:"+n+'px;overflow:hidden;"><div id="bs_tviewport" style="width:'+tt*nt+'px;height:100%;position:absolute;left:0;overflow:hidden"></div></div>'),s.find(".bs_slide").each(function(t){var e=i(this).find(".bs_image").attr("src");s.find("#bs_tviewport").append(0==t?"<div class='carousel active' style='width:"+nt+"px;float:left;'><div class='bs_ci'><img src='"+e+"' width='"+nt+"'/></div></div>":"<div class='carousel' style='width:"+nt+"px;float:left;'><div class='bs_ci'><img src='"+e+"' width='"+nt+"'/></div></div>")}),at=(s.find("#bs_tviewport").width()-e)/(e-100)}function c(){switch(Y.carousel){case"horizontal":var i=E.find(".bs_hcarousel").width();if(1==Q)return!1;if(st*tt<Y.width)return!1;var t=E.find("#bs_hsubboard"),s=E.find("#bs_hviewport"),e=st*D;e=e+i>s.width()?i-s.width():-st*D,t.animate({marginLeft:e},{duration:200,easing:"easeOutSine"});break;case"vertical":if(1==Q)return!1;if(60*tt<Y.height)return!1;var t=E.find("#bs_vsubboard"),s=E.find("#bs_vviewport"),e=60*D;e=e+Y.height>s.height()?Y.height-s.height():-60*D,"transformer"!=Y.skin&&t.animate({marginTop:e},{duration:200,easing:"easeOutSine"})}}function h(i){switch(i){case 1:b(0);break;case 2:b(1);break;case 3:b(2);break;case 4:b(3);break;case 5:l();break;case 6:f()}}function b(t){var s=[[100,0,0,0],[-100,0,0,0],[0,100,0,0],[0,-100,0,0]],e=[[-Y.width,0],[Y.width,0],[0,-Y.height],[0,Y.height]];E.find("#bs_next").css("left",s[t][0]+"%").css("top",s[t][1]+"%"),E.find("#bs_current").css("left",s[t][2]+"%").css("top",s[t][3]+"%"),E.find(".bs_animate").each(function(s){i(this).animate({left:"+="+e[t][0]+"px",top:"+="+e[t][1]+"px"},{duration:700,easing:"easeOutSine",complete:function(){0==s&&p()}})})}function l(){E.find("#bs_next").css("left","0%").css("top","0%"),E.find("#bs_current").css("left","0%").css("top","0%"),E.find("#bs_next").css("opacity",0),E.find("#bs_next").animate({opacity:1},{duration:800,easing:"easeOutSine",complete:function(){p()}})}function f(){var t,s,e=(E.find("#bs_current .bs_image").width(),E.find("#bs_current .bs_image").height(),E.find("#bs_current .bs_image").attr("src"),E.find("#bs_next .bs_image").width()),n=E.find("#bs_next .bs_image").height(),a=E.find("#bs_next .bs_image").attr("src");t=parseInt(E.find("#bs_next .bs_image").css("marginLeft")),s=parseInt(E.find("#bs_next .bs_image").css("marginTop")),E.find("#bs_next").css("left","100%").css("top","0%"),E.find("#bs_current").css("left","0%").css("top","0%");for(var r="<div id='bs_blind_container' style='position:absolute;width:100%;height:100%;z-index:80'>",o=[[-100,-100],[-100,100],[100,100],[100,-100]],d=0;4>d;d++)r+="<div class='bs_blind_slide' style='position:absolute;overflow:hidden;width:100%;height:100%;'><img src='"+a+"' style='position:absolute;width:"+e+"px;height:"+n+"px;left:"+o[d][0]+"px;top:"+o[d][1]+"px;margin-left:"+t+"px;margin-top:"+s+"px;'/></div>";r+="</div>",i(r).insertBefore(E.find("#bs_next")),E.find(".bs_blind_slide img").css("opacity",0),E.find(".bs_blind_slide img").each(function(t){i(this).animate({left:0,top:0,opacity:1},{duration:600,easing:"easeOutQuad",complete:function(){3==t&&p()}})})}function p(){E.find("#bs_blind_container").remove(),E.find(".bs_cube").remove(),E.find(".bs_operate").stop(),E.find("#bs_current").css("left",0).css("top",0),E.find("#bs_next").css("left","100%").css("top","0%"),F=D,e(F);var i=E.find("#bs_current").attr("kzoom");if(1==i)E.find("#bs_current .bs_image").attr("width",Y.width);else{var t=[];t.width=E.find("#bs_current").find(".bs_image").width(),t.height=E.find("#bs_current .bs_image").height(),E.find("#bs_current .bs_image").attr("width",t.width).css("margin-left",-parseInt(t.width-Y.width)/2).css("margin-top",-parseInt(t.height-Y.height)/2)}W()}function _(){var i=navigator.userAgent.toLowerCase();return-1!=i.indexOf("msie")?parseInt(i.split("msie")[1]):!1}function g(i){var t=E.find("#bs_bullet").position().left-126,s=parseInt(E.find(".bs_index").width())+2*parseInt(E.find(".bs_index").css("margin-left")),e=parseInt(E.find("#bs_bullet").css("padding-left")),n=E.find(".bs_bt_slide").width();switch("jumbo"==Y.skin?E.find(".bs_bt_preview").css("left",t-40):"starworld"==Y.skin?E.find(".bs_bt_preview").css("left",t+105):E.find(".bs_bt_preview").css("left",t),V){case 0:E.find(".bs_bt_preview").css("margin-left",e+i*s-33+s/2),E.find(".bs_bt_container").css("margin-left",-n*(i-1)),E.find(".bs_bt_preview").fadeIn(200);break;case 1:var s=parseInt(E.find(".bs_index").width())+2*parseInt(E.find(".bs_index").css("margin-left"));E.find(".bs_bt_preview").delay(50).animate({"margin-left":e+i*s-33+s/2},{duration:200,queue:!1,easing:"easeOutSine"}),E.find(".bs_bt_container").animate({"margin-left":-n*(i-1)},{duration:200,queue:!1,easing:"easeOutSine"})}0==V&&(V=1)}function u(i){var t=[],s=i.clone().css("visibility","hidden").removeAttr("height").removeAttr("width").appendTo("body");return t.width=s.width(),t.height=s.height(),s.remove(),t}function m(){if(1!=G){var i=E.find(".progressbar");if(i.show(),!i.hasClass("on"))switch(i.addClass("on"),Y.progressbartype){case"linear":N=setInterval(C,50),E.find("#lprogress").css("width",$);break;case"circle":N=setInterval(z,50),E.find(".cprogress").val($).trigger("change")}}}function v(){clearInterval(N),E.find(".progressbar").removeClass("on")}function w(){clearInterval(N),E.find(".progressbar").hide(),E.find("#lprogress").css("width",0),E.find(".progressbar").removeClass("on"),$=0}function x(){V=0,E.find(".bs_bt_preview").hide()}function y(){if(1==Y.lightbox&&E.find("#bs_lightbox").length<1){B=0,1==B&&E.find(".bs_a_play").addClass("bs_a_pause");var t=i(".bs_slide:nth-child("+(F+1)+")"),s=(u(t),Y.width),e=Y.height;E.append("<div id='bs_lightbox'><div id='bs_lightbox_overlay'></div><div id='bs_sublightbox'><div id='bs_lightbox_control_close'></div><div id='bs_lightbox_control_prev' class='bs_lcontrol'></div><div id='bs_lightbox_control_next' class='bs_lcontrol'></div><div id='bs_lviewport'></div></div></div>"),E.find("#bs_lightbox").append("<div id='bs_lightbox_thumb' class=''><div id='bs_subboard'><div id='bs_thumb_container'></div></div></div>"),E.find(".bs_slide").each(function(t){var s=i(this).find(".bs_image").attr("data-src");E.find("#bs_thumb_container").append(t==F?"<div class='bs_thumb active'><div class='bs_subthumb'><img class='bs_thumb_img' src='"+i(this).find(".bs_image").attr("src")+"' data-src='"+s+"'/></div></div>":"<div class='bs_thumb'><div class='bs_subthumb'><img class='bs_thumb_img' src='"+i(this).find(".bs_image").attr("src")+"' data-src='"+s+"'/></div></div>")}),E.find("#bs_thumb_container").css("width",54*tt),E.find("#bs_lviewport").html(t.html()),E.find("#bs_sublightbox .bs_layer").remove(),0!=_()&&_()<9?(E.find("#bs_sublightbox").css("width",s).css("height",e).css("marginLeft",-s/2).css("marginTop",-e/2).css("opacity",0),E.find("#bs_sublightbox").animate({opacity:1},{duration:400,easing:"easeOutSine"})):(E.find("#bs_sublightbox").css("width",s).css("height",e).css("marginLeft",-s/2).css("marginTop",-e/2).css("opacity",0).scale(.5),E.find("#bs_sublightbox").animate({opacity:1,scale:1},{duration:400,easing:"easeOutSine"}))}}function k(t){var s=E.find("#bs_thumb_container"),e=E.find("#bs_subboard"),n=s.width(),a=Math.abs(parseInt(e.css("marginLeft"))),r=s.find(".active").index();if(n<i(window).width()&&void 0!==t)return!1;if(0==t){if(a>54*r)e.animate({marginLeft:-54*r},{duration:200,easing:"easeOutSine"});else if(n-i(window).width()-a<n-54*(tt-r)){var o=-54*r;54*r+i(window).width()>n&&(o=i(window).width()-n),e.animate({marginLeft:o},{duration:200,easing:"easeOutSine"})}r==tt-1&&e.animate({marginLeft:-n+i(window).width()},{duration:200,easing:"easeOutSine"})}else if(1==t){if(n-54*(tt-r-1)-i(window).width()>a)e.animate({marginLeft:-(n-54*(tt-r-1)-i(window).width())},{duration:200,easing:"easeOutSine"});else if(54*(r+1)-i(window).width()>=a||a>=54*r){var o=i(window).width()-54*(r+1);o>0&&(o=0),e.animate({marginLeft:o},{duration:200,easing:"easeOutSine"})}0==r&&e.animate({marginLeft:0},{duration:200,easing:"easeOutSine"})}void 0===t&&(n<i(window).width()?e.css("marginLeft",0):54*r+i(window).width()<n?e.show():e.css("marginLeft",-n+i(window).width()))}function I(t){if(1==Y.swipe&&1==H){var s=offsety=0,e=-1;if(s=t[0]-K[0],offsety=t[1]-K[1],H=0,Math.abs(s)>2||Math.abs(offsety)>2)switch(J){case 1:s>2?e=0:-2>s?e=1:(J=0,E.find(".bs_operate").css("marginLeft",0).css("marginTop",0),E.find("#bs_prev").css("left","-100%").css("top","0"),E.find("#bs_next").css("left","100%").css("top","0")),e>-1&&(G=1,E.find(".bs_operate").each(function(t){i(this).animate({marginLeft:Y.width-2*Y.width*e+"px"},{duration:800,easing:"easeOutSine",complete:function(){2==t&&(F=1==e?(F+1)%tt:0==F?tt-1:F-1,S())}})}));break;case 2:offsety>2?e=0:-2>offsety?e=1:(J=0,E.find(".bs_operate").css("marginLeft",0).css("marginTop",0),E.find("#bs_prev").css("left","-100%").css("top","0"),E.find("#bs_next").css("left","100%").css("top","0")),e>-1&&(G=1,E.find(".bs_operate").each(function(t){i(this).animate({marginTop:Y.height-2*Y.height*e+"px"},{duration:800,easing:"easeOutSine",complete:function(){2==t&&(F=1==e?(F+1)%tt:0==F?tt-1:F-1,S())}})}))}else J=0,E.find(".bs_operate").css("marginLeft",0).css("marginTop",0),E.find("#bs_prev").css("left","-100%").css("top","0"),E.find("#bs_next").css("left","100%").css("top","0"),1==B&&m()}}function S(){e(F),E.find(".bs_operate").css("marginLeft",0).css("marginTop",0),E.find("#bs_prev").css("left","-100%").css("top","0").css("marginLeft",0).css("marginTop",0),E.find("#bs_next").css("left","100%").css("top","0").css("marginLeft",0).css("marginTop",0),E.find(".bs_index").removeClass("active"),E.find(".carousel").removeClass("active"),E.find(".bs_index:nth-child("+(F+2)+")").addClass("active"),E.find(".carousel:nth-child("+(F+1)+")").addClass("active"),D=F,"starworld"==Y.skin&&E.find("#bs_numboard").html(D+1+" / "+tt),0!=Y.carousel&&(Q=0,c(F)),M(),G=0,J=0,1==B&&m(),G=0,Y.onanimend(),1==Y.responsive&&M(),E.find("#bs_next .bs_caption").stop(),1==B&&m(),q()}function L(t){if(E.find("#bs_sublightbox_temp").length>0)return!1;var s=(Y.width,Y.height,i(".bs_slide:nth-child("+(t+1)+")"));E.find("#bs_sublightbox").append("<div id='bs_sublightbox_temp'></div>"),E.find("#bs_sublightbox_temp").html(s.html()),E.find("#bs_sublightbox_temp").find(".bs_image").css("width",Y.width),E.find("#bs_sublightbox_temp").css("marginLeft",-80).css("opacity",0),E.find(".bs_thumb").removeClass("active"),E.find(".bs_thumb:nth-child("+(t+1)+")").addClass("active"),E.find("#bs_sublightbox_temp").animate({opacity:1,marginLeft:"+=80px"},{duration:400,easing:"easeOutSine"}),E.find("#bs_lviewport").animate({opacity:0,marginLeft:"+=80px"},{duration:400,easing:"easeOutSine",complete:function(){E.find("#bs_lviewport").remove(),E.find("#bs_sublightbox_temp").stop().css("marginLeft","").css("marginTop","").attr("id","bs_lviewport")}})}function C(){var i=E.find("#lp_ct").width();"transformer"==Y.skin&&(i-=200),$+=parseInt((i-10)/(20*Y.interval)),$<parseInt(i-10)||T(),E.find("#lprogress").css("width",$)}function z(){$+=5e3/(1e3*Y.interval),100>$||(w(),T()),E.find(".cprogress").val(Math.ceil($)).trigger("change")}function O(){Q=0,0==Y.repeat_mode?F>0?A(F-1):w():A(0==F?tt-1:F-1)}function T(){Q=0,0==Y.repeat_mode?tt-1>F?A(F+1):w():A((F+1)%tt)}function M(){var t=parseInt(E.attr("o-width")),s=i(window).width();Y.fullwidth?Y.width=s:s>400&&t>=s?Y.width="sharp"==Y.skin||"clean"==Y.skin?s-20:s-40:400>s?Y.width=Y.fullwidth?400:380:s>t&&(Y.width=t),P(),k();var e=E.attr("o-font"),n=Y.width/t;Y.height=Y.width/Z,font_size=10>e*n?10:e*n,E.css("width",Y.width).css("height",Y.height),E.find(".bs_caption").css("font-size",font_size),E.find("#bs_sublightbox").css("width",Y.width+8).css("height",Y.height+8).css("marginLeft",-Y.width/2-4).css("marginTop",-Y.height/2),E.find(".bs_operate").each(function(){i(this).find(".bs_layer").each(function(){var t=i(this).attr("o-width"),s=i(this).attr("o-height"),e=i(this).attr("o-lft"),a=i(this).attr("o-rgt"),r=i(this).attr("o-top"),o=i(this).attr("o-btm");e="auto"!=e?parseInt(e)*n:e,a="auto"!=a?parseInt(a)*n:a,r="auto"!=r?parseInt(r)*n:r,o="auto"!=o?parseInt(o)*n:o,i(this).css("width",t*n).css("height",s*n).css("left",e*n).css("right",a*n).css("top",r*n).css("bottom",o*n)})})}function P(){var i=Y.width-100>nt*tt?nt*tt:Y.width-100,t=(Y.width-i)/2-8;E.find("#bs_carousel").css("marginLeft",0).css("left",t).css("width",i),Y.width-100>nt*tt&&E.find("#bs_tviewport").css("margin-left",0),at=(E.find("#bs_tviewport").width()-i)/(i-100)}function A(t){if(1==G||F==t)return!1;G=1,Y.onanimstart(),w(),D=t;var s=E.find("#bs_next"),e=E.find(".bs_slide:nth-child("+(D+1)+")");s.html(e.html());var n=void 0!=e.attr("qtype")?e.attr("qtype"):0,a=void 0!=e.attr("kzoom")?e.attr("kzoom"):1,r=void 0!=e.attr("kposx")?e.attr("kposx"):0,o=void 0!=e.attr("kposy")?e.attr("kposy"):0;if(1==n&&1==a&&(n=4),s.attr("kzoom",a),s.attr("kposx",r),s.attr("kposy",o),s.attr("qtype",n),s.find(".bs_image").addClass("zoompa"+n),s.find(".bs_image").hasClass("active")){var d=E.find("#bs_next").attr("kzoom");1==d?E.find("#bs_next").find(".bs_image").attr("width",Y.width):2==d&&E.find("#bs_next").find(".bs_image").attr("width",2*Y.width).attr("height",2*Y.height).css("margin-left",-parseInt(E.find("#bs_next").find(".bs_image").width()-Y.width)/2).css("margin-top",-parseInt(E.find("#bs_next").find(".bs_image").height()-Y.height)/2),j()}else E.find("#bs_current").prepend("<img class='bs_load' src='img/skin/"+Y.skin+"_loader.gif' />"),s.find(".bs_image").on("load",function(){var t=i(this).parents(".bs_operate").attr("kzoom");1==t?i(this).attr("width",Y.width):2==t&&i(this).attr("width",i(this).width()).css("margin-left",-parseInt(i(this).width()-Y.width)/2).css("margin-top",-parseInt(i(this).height()-Y.height)/2),i(this).addClass("active"),E.find("#bs_current").find(".bs_load").remove(),j()})}function j(){M(),E.find(".bs_index").removeClass("active"),E.find(".carousel").removeClass("active"),E.find(".bs_index:nth-child("+(D+2)+")").addClass("active"),E.find(".carousel:nth-child("+(D+1)+")").addClass("active"),"starworld"==Y.skin&&E.find("#bs_numboard").html(D+1+" / "+tt),0!=Y.carousel&&c(F),clearInterval(U),it=parseInt(8*Math.random())+1,X()}function X(){var i,t,s=[[-1,0],[1,0],[0,-1],[0,1]];i=E.find(".bs_slide:nth-child("+(D+1)+")").attr("data-animation"),t=E.find(".bs_slide:nth-child("+(F+1)+")").attr("data-caption"),i=void 0===i?0==Y.animation?parseInt(5*Math.random())+1:Y.animation:parseInt(i),void 0===t||""==t?(E.find(".bs_caption").hide(),h(i)):E.find("#bs_current .bs_caption").css("marginLeft",0).css("marginBottom",0).animate({marginLeft:140*s[Y.caption_animation][0]+"px",marginBottom:60*s[Y.caption_animation][1]+"px",opacity:0},{duration:600,easing:"easeOutSine",complete:function(){E.find(".bs_caption").hide(),i>302?bs_3d_animate(i-302):h(i)}})}function W(){q();var i,t=[[-1,0],[1,0],[0,-1],[0,1]];i=_()<9&&0!=_()?.4:1,caption=E.find(".bs_slide:nth-child("+(F+1)+")").attr("data-caption"),"undefined"==typeof caption||""==caption?(G=0,Y.onanimend(),1==Y.responsive&&M(),E.find("#bs_next .bs_caption").stop(),1==B&&m()):(E.find(".bs_caption").show(),E.find("#bs_current .bs_caption").css("marginLeft",140*t[Y.caption_animation][0]).css("marginBottom",60*t[Y.caption_animation][1]).css("opacity",0).animate({marginLeft:"0px",marginBottom:"0px",opacity:i},{duration:300,easing:"easeOutSine",complete:function(){G=0,Y.onanimend(),1==Y.responsive&&M(),E.find("#bs_next .bs_caption").stop(),1==B&&m()}}))}function q(){function t(){e.save(),e.globalAlpha=1,e.fillStyle="#fff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.restore()}function s(){if(g+=.2,r>90?r+=Math.sin(3.14*r/180):r++,r>180)return void clearInterval(U);if(1==o);else if(2==o&&(-parseInt(Y.width)/2+b*r+f*r>-10||-parseInt(Y.height)/2+l*r+p*r>-10||Y.width/2-b*r+f*r<0||Y.height/2-l*r+p*r<0))return void clearInterval(U);t(),1==d?2==o?e.filter="blur("+(20-g)+"px)":d=4:d>1&&(e.filter=m[d-2]+"("+(100-5*g)+"%)"),1==o?e.drawImage(n[0],-r/2-(Y.width-c)/2e3*r,-r/2-(Y.height-h)/2e3*r,Y.width+r+(Y.width-c)/4e3*r,E.find("#bs_current").find(".bs_image").height()+r+(Y.height-h)/4e3*r):2==o&&e.drawImage(n[0],-parseInt(Y.width)/2+b*r+f*r,-parseInt(Y.height)/2+l*r+p*r,2*Y.width-2*b*r,2*Y.height-2*l*r)}var e,n=E.find("#bs_current").find(".bs_image"),a=5>it?0:200,r=0,o=parseInt(E.find("#bs_current").attr("kzoom")),d=parseInt(E.find("#bs_current").attr("qtype")),c=parseInt(E.find("#bs_current").attr("kposx")),h=parseInt(E.find("#bs_current").attr("kposy")),b=parseInt(Y.width)/800,l=parseInt(Y.height)/800,f=c/400,p=h/400,g=0,u=E.find("#bs_current").find(".bs_image").height(),m=["sepia","invert","grayscale"];if(E.find(".bs_canvas").remove(),0!=_()&&_()<9){var v=[[-100,0],[-200,0],[-200,-200/Z],[-80,-200/Z],[-120,-80/Z],[-200,0],[-200,-200/Z],[0,-200/Z],[-80,-200/Z],[-80,-80/Z]],w=5>it?400:-400;i("<img class='bs_canvas' width='"+2*Y.width+"' src='"+n.attr("src")+"'/>").insertAfter(n),E.find("#bs_current .bs_canvas").css("marginLeft",-a).css("marginTop",-a/Z).animate({width:"+="+w/4,marginLeft:"+="+v[it][0]/12,marginTop:"+="+v[it][1]/(12*Z)},{duration:5e3,easing:"easeOutSine"})}else i("<canvas class='bs_canvas' width='"+Y.width+"' height='"+Y.height+"'></canvas>").insertAfter(n),e=E.find(".bs_canvas")[0].getContext("2d"),1==d?2==o?e.filter="blur(20px)":d=4:d>1&&(e.filter=m[d-2]+"(100%)"),1==o?e.drawImage(n[0],0,0,Y.width,u):2==o&&e.drawImage(n[0],-parseInt(Y.width)/2,-parseInt(Y.height)/2,2*Y.width,2*Y.height),U=setInterval(s,50)}var E,Y,N,U,B,Q,R,$,F,D,G,H,J,K,V,Z,it,tt,st,et=[],nt=120,at=-1,rt={width:800,height:300,autoplay:!1,interval:5,fullwidth:!1,responsive:!0,progressbar:!0,progressbartype:"circle",caption_type:"fixed",caption_animation:0,animation:0,navtype:0,bullet:!0,carousel:"horizontal",repeat_mode:!0,skin:"default",path:"",lightbox:!1,pause_on_hover:!0,swipe:!1,keyboard:!1,scrollmode:!1,onanimstart:function(){return!1},onanimend:function(){return!1},onvideoplay:function(){return!1},onslidechange:function(){return!1}};E=t.handle,Y=i.extend({},rt,t.option||{}),s(),i(document).ready(function(){i("body").on("mousemove","#bs_carousel",function(i){var t=E.find("#bs_carousel").width()-E.find("#bs_tviewport").width();if(at>=0){var s=parseInt(E.find("#bs_carousel").offset().left),e=parseInt(s-i.clientX+50)*at;e>0?e=0:t>e&&(e=t),E.find("#bs_tviewport").css("margin-left",e)}}),E.mouseover(function(){Y.pause_on_hover&&v(),E.find(".bs_nav").show(),"ios7"==Y.skin&&i("#bs_carousel").css("opacity",1).show()}).mouseleave(function(){Y.pause_on_hover&&1==B&&m(),E.find(".bs_nav").hide(),"ios7"==Y.skin&&E.find("#bs_carousel").hide()}),E.find("#bs_shadow").mousemove(function(){"ios"==Y.skin&&E.find("#bs_carousel").hide()}),E.find("#bs_viewport").on("mousedown",function(i){1==Y.swipe&&0==G&&(K=[i.pageX,i.pageY],H=1,M(),w(),it=parseInt(8*Math.random())+1,clearInterval(U),"ios7"==Y.skin&&(E.find("#bs_lbox").hide(),E.find(".bs_nav").hide(),E.find("#bs_carousel").hide()))}).on("mousemove",function(i){if(1==H&&0==G){var t=offsety=0;t=i.pageX-K[0],offsety=i.pageY-K[1],0==J&&(J=Math.abs(t)<Math.abs(offsety)?2:1,2==J&&(E.find("#bs_prev").css("left","0").css("top","-100%"),E.find("#bs_next").css("left","0").css("top","100%"))),1==J?E.find(".bs_operate").css("marginLeft",t):2==J&&E.find(".bs_operate").css("marginTop",offsety)}}).on("mouseup",function(t){i(this).removeClass("cursor_down"),1!=G&&(mp_flag=0,"ios7"==Y.skin&&(E.find("#bs_lbox").show(),E.find(".bs_nav").show(),E.find("#bs_carousel").show()),I([t.pageX,t.pageY]))}).mouseleave(function(t){i(this).removeClass("cursor_down"),1!=G&&I([t.pageX,t.pageY])}),E.find("#bs_viewport").on("touchstart",function(i){1==Y.swipe&&0==G&&(K=[i.originalEvent.touches[0].pageX,i.originalEvent.touches[0].pageY],H=1,M(),w(),it=parseInt(8*Math.random())+1,clearInterval(U))}).on("touchmove",function(i){if(1==H&&0==G){var t=offsety=0;t=i.originalEvent.changedTouches[0].pageX-K[0],offsety=i.originalEvent.changedTouches[0].pageY-K[1],0==J&&(J=Math.abs(t)>Math.abs(offsety)?1:2,2==J&&(E.find("#bs_prev").css("left","0").css("top","-100%"),E.find("#bs_next").css("left","0").css("top","100%"))),1==J?E.find(".bs_operate").css("marginLeft",t):2==J&&E.find(".bs_operate").css("marginTop",offsety)}}).on("touchend",function(i){1!=G&&I([i.originalEvent.changedTouches[0].pageX,i.originalEvent.changedTouches[0].pageY])}),i("body").on("click","#bs_bleft",O),i("body").on("click","#bs_bright",T),i("body").on("click","#left_btn",O),i("body").on("click","#right_btn",T),E.on("click","#bs_lbox",function(){y()}),E.on("mouseover",".bs_index",function(){g(i(this).index())}),E.on("click",".bs_index",function(){A(i(this).index()-1)}),E.on("click",".carousel",function(){Q=1,A(i(this).index(),1)}),E.on("mouseleave","#bs_bullet",function(){x()}),E.on("mousemove","#bs_bleft",function(){x()}),E.on("mousemove","#bs_bright",function(){x()}),E.on("click","#bs_lightbox_control_next",function(){var t=i(".bs_thumb.active").index();t=(t+1)%tt,L(t),k(1)}),E.on("click","#bs_lightbox_control_prev",function(){var t=i(".bs_thumb.active").index();0==t?t=tt-1:t-=1,L(t),k(0)}),E.on("mouseout","#bs_lightbox_thumb",function(){var i=E.find("#bs_lightbox_thumb");i.removeClass("active")}),E.on("mouseover","#bs_lightbox_thumb",function(){var i=E.find("#bs_lightbox_thumb");i.addClass("active")}),E.on("click","#bs_lightbox_control_close",function(){E.find("#bs_lightbox").animate({opacity:0},{duration:200,easing:"easeOutSine",complete:function(){1==B&&m(),E.find("#bs_lightbox").remove()}})}),E.on("click",".bs_thumb",function(){var t=i(this).index();L(t)}),E.on("mousemove","#bs_lightbox_thumb",function(t){var s=E.find("#bs_subboard"),e=E.find("#bs_thumb_container").width();return e<i(window).width()?!1:void s.css("marginLeft",-t.pageX*((e-i(window).width())/i(window).width()))}),E.on("touchstart","#bs_lightbox_thumb",function(i){K=i.originalEvent.touches[0].pageX,H=1}),E.on("touchmove","#bs_lightbox_thumb",function(i){var t=E.find("#bs_subboard"),s=i.originalEvent.changedTouches[0].pageX-K,e=parseInt(t.css("marginLeft"));t.css("marginLeft",e+s)}),E.on("touchend","#bs_lightbox_thumb",function(){var t=E.find("#bs_subboard"),s=parseInt(t.css("marginLeft"));s>0?t.animate({marginLeft:0},{duration:200,easing:"easeOutSine"}):s<i(window).width()-i(this).width()&&t.animate({marginLeft:i(window).width()-i(this).width()},{duration:200,easing:"easeOutSine"})}),E.on("click","#bs_lightbox_control_close",function(){E.find("#bs_lightbox").animate({opacity:0},{duration:200,easing:"easeOutSine",complete:function(){1==B&&m(),E.find("#bs_lightbox").remove()}})}),E.on("click",".bs_play",function(){var t=i(this).parent().find(".bs_image").attr("data-src");i(this).parent().append(t.indexOf("youtube")<0?"<iframe class='bs_video' src='"+t+"&autoplay=1'></iframe>":"<iframe class='bs_video' src='"+t+"'></iframe>"),v()}),E.on("click",".bs_a_play",function(){E.find(".bs_a_play").hasClass("bs_a_pause")?(E.find(".bs_a_play").removeClass("bs_a_pause"),B=0,v()):(E.find(".bs_a_play").addClass("bs_a_pause"),0==B&&(B=1,Y.progressbar&&r()),B=1,m())
}),i(window).resize(function(){if(1==G)return!1;if(1==Y.responsive){Q=0;{i(window).width()/et.width}M()}1==B&&(w(),m())})})}/*!
	/**
	* Monkey patch jQuery 1.3.1+ to add support for setting or animating CSS
	* scale and rotation independently.
	* https://github.com/zachstronaut/jquery-animate-css-rotate-scale
	* Released under dual MIT/GPL license just like jQuery.
	* 2009-2012 Zachary Johnson www.zachstronaut.com
	*/
function s(i){var t=i.data("_ARS_data");return t||(t={rotateUnits:"deg",scale:1,rotate:0},i.data("_ARS_data",t)),t}function e(i,t){i.css("transform","rotate("+t.rotate+t.rotateUnits+") scale("+t.scale+","+t.scale+")")}function n(i){for(var t,s=["transform","WebkitTransform","msTransform","MozTransform","OTransform"];t=s.shift();)if(void 0!==i.style[t])return t;return"transform"}var a;i.fn.bs_kenburn=function(s){return a=new t({handle:i(this),option:s})},i.fn.rotate=function(t){var n,a=i(this),r=s(a);return void 0===t?r.rotate+r.rotateUnits:(n=(""+t).match(/^(-?\d+(\.\d+)?)(.+)?$/),n&&(n[3]&&(r.rotateUnits=n[3]),r.rotate=n[1],e(a,r)),this)},i.fn.scale=function(t){var n=i(this),a=s(n);return void 0===t?a.scale:(a.scale=t,e(n,a),this)};var r=i.fx.prototype.cur;i.fx.prototype.cur=function(){return"rotate"==this.prop?parseFloat(i(this.elem).rotate()):"scale"==this.prop?parseFloat(i(this.elem).scale()):r.apply(this,arguments)},i.fx.step.rotate=function(t){var e=s(i(t.elem));i(t.elem).rotate(t.now+e.rotateUnits)},i.fx.step.scale=function(t){i(t.elem).scale(t.now)};var o=i.fn.animate;i.fn.animate=function(t){if(void 0!==t.rotate){var e,n,a=(""+t.rotate).match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);a&&a[5]&&(e=i(this),n=s(e),n.rotateUnits=a[5]),t.rotate=a[1]}return o.apply(this,arguments)};var d=null,c=i.fn.css;i.fn.css=function(t,s){if(null===d&&(d=void 0!==i.cssProps?i.cssProps:void 0!==i.props?i.props:{}),void 0===d.transform&&("transform"==t||"object"==typeof t&&void 0!==t.transform)&&(d.transform=n(this.get(0))),"transform"!=d.transform)if("transform"==t){if(t=d.transform,void 0===s&&jQuery.style)return jQuery.style(this.get(0),t)}else"object"==typeof t&&void 0!==t.transform&&(t[d.transform]=t.transform,delete t.transform);return c.apply(this,arguments)}}(jQuery);